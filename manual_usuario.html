<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manual de Usuario - Dashboard de Ventas</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap');
        @import url("https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css");

        :root {
            --odoo-primary: #875A7B;
            --odoo-primary-dark: #6B4563;
            --text-primary: #2c3e50;
            --text-secondary: #555;
            --bg-light: #f8f9fa;
            --border-color: #e0e6ed;
            --accent-color: #3498db;
        }

        body {
            font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            line-height: 1.7;
            color: var(--text-secondary);
            background-color: #fdfdff;
            margin: 0;
            display: flex;
        }

        #toc {
            width: 280px;
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            background: var(--bg-light);
            border-right: 1px solid var(--border-color);
            padding: 20px;
            overflow-y: auto;
        }

        #toc h2 {
            color: var(--odoo-primary);
            font-size: 1.5rem;
            margin-top: 0;
            border-bottom: 2px solid var(--odoo-primary-dark);
            padding-bottom: 10px;
        }

        #toc ul {
            list-style: none;
            padding: 0;
        }

        #toc li a {
            display: block;
            padding: 10px 15px;
            color: var(--text-secondary);
            text-decoration: none;
            border-radius: 6px;
            transition: all 0.2s ease-in-out;
            font-weight: 500;
        }

        #toc li a:hover, #toc li a.active {
            background-color: var(--odoo-primary);
            color: white;
            transform: translateX(5px);
        }

        main {
            margin-left: 320px;
            padding: 40px;
            max-width: 900px;
            width: 100%;
        }

        section {
            margin-bottom: 60px;
            padding-top: 20px;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 30px;
        }

        h1, h2, h3 {
            color: var(--text-primary);
            font-weight: 600;
        }

        h1 {
            font-size: 2.8rem;
            color: var(--odoo-primary-dark);
            margin-bottom: 20px;
        }

        h2 {
            font-size: 2rem;
            border-bottom: 2px solid var(--odoo-primary);
            padding-bottom: 10px;
            margin-top: 0;
        }

        h3 {
            font-size: 1.4rem;
            color: var(--odoo-primary);
            margin-top: 30px;
        }

        p, li {
            font-size: 1rem;
        }

        code {
            background-color: #e9ecef;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', Courier, monospace;
            color: #c7254e;
        }

        .note {
            background-color: #e7f3fe;
            border-left: 5px solid var(--accent-color);
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }

        .note strong {
            color: var(--accent-color);
        }

        .screenshot {
            width: 100%;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            margin-top: 15px;
        }

        .bi {
            margin-right: 8px;
        }
    </style>
</head>
<body>

    <nav id="toc">
        <h2><i class="bi bi-book"></i>Manual</h2>
        <ul>
            <li><a href="#introduccion">Introducci√≥n</a></li>
            <li><a href="#inicio-sesion">Inicio de Sesi√≥n</a></li>
            <li><a href="#dashboard-internacional">Dashboard Internacional (Principal)</a></li>
            <li><a href="#gestion-metas-linea">Gesti√≥n de Metas (L√≠nea)</a></li>
            <li><a href="#gestion-metas-cliente">Gesti√≥n de Metas (Cliente)</a></li>
            <li><a href="#vistas-detalladas">Vistas Detalladas</a></li>
            <li><a href="#exportacion">Exportaci√≥n de Datos</a></li>
            <li><a href="#solucion-problemas">Soluci√≥n de Problemas</a></li>
        </ul>
    </nav>

    <main>
        <h1><i class="bi bi-graph-up-arrow"></i>Manual de Usuario: Dashboard de Ventas</h1>

        <section id="introduccion">
            <h2><i class="bi bi-rocket-takeoff"></i>Introducci√≥n</h2>
            <p>
                Bienvenido al manual del Dashboard de Ventas. Esta aplicaci√≥n ha sido dise√±ada para proporcionar una visi√≥n clara y en tiempo real del rendimiento comercial de la empresa, tanto a nivel nacional como internacional.
            </p>
            <p>
                El sistema se conecta directamente con <strong>Odoo</strong> para obtener datos de ventas y con <strong>Google Sheets</strong> para gestionar las metas comerciales, ofreciendo una herramienta centralizada para el an√°lisis y la toma de decisiones.
            </p>
            
            <h3><i class="bi bi-info-circle-fill"></i>Conceptos Clave y Terminolog√≠a</h3>
            <p>
                Antes de comenzar, es importante comprender algunos conceptos fundamentales que se utilizan a lo largo del sistema:
            </p>
            
            <h4>Estados de Facturaci√≥n</h4>
            <ul>
                <li><strong>Facturado <span style="color: #27ae60;">‚óè</span>:</strong> Representa las ventas que ya han sido facturadas al cliente. Son ingresos confirmados que se han registrado en el sistema contable. En los gr√°ficos y tablas aparecen con color <strong style="color: #27ae60;">verde</strong>.</li>
                
                <li><strong>Por Facturar <span style="color: #e67e22;">‚óè</span>:</strong> Son los pedidos confirmados que ya est√°n en el sistema pero a√∫n no se han emitido las facturas correspondientes. Representan ventas comprometidas pero pendientes de facturaci√≥n. Aparecen con color <strong style="color: #e67e22;">naranja</strong>.</li>
                
                <li><strong>Mixto <span style="color: #3498db;">‚óè</span>:</strong> Indica productos o pedidos que tienen facturaci√≥n parcial, es decir, una parte ya fue facturada y otra parte est√° pendiente. Se visualizan con color <strong style="color: #3498db;">azul</strong>.</li>
            </ul>

            <h4>Indicadores de Rendimiento</h4>
            <ul>
                <li><strong>Venta Proyectada:</strong> Es la suma del monto ya facturado m√°s el monto pendiente de facturar. Representa la estimaci√≥n total de ventas que se espera alcanzar considerando los pedidos confirmados.</li>
                
                <li><strong>Meta:</strong> Es el objetivo de ventas establecido para un per√≠odo espec√≠fico (a√±o o mes) por cliente o l√≠nea comercial. Se configura en la secci√≥n de "Gesti√≥n de Metas".</li>
                
                <li><strong>Brecha Comercial:</strong> Es la diferencia entre la Venta Proyectada y la Meta. Un valor negativo indica que se est√° por debajo de la meta, mientras que un valor positivo indica que se superar√° la meta.</li>
                
                <li><strong>% Avance:</strong> Muestra el porcentaje de la meta que ya se ha alcanzado con las ventas facturadas (no incluye lo pendiente). Es un indicador del progreso real hacia el objetivo.</li>
                
                <li><strong>% Participaci√≥n (% Part.):</strong> Representa el porcentaje que representa una l√≠nea comercial o producto respecto al total de ventas. Ayuda a identificar qu√© √°reas tienen mayor peso en el negocio.</li>
            </ul>

            <h4>Indicadores Visuales de Sem√°foro</h4>
            <p>El sistema utiliza colores tipo sem√°foro para facilitar la evaluaci√≥n r√°pida del rendimiento:</p>
            <ul>
                <li><strong style="color: #27ae60;">Verde:</strong> Rendimiento excelente. Se ha alcanzado el 80% o m√°s de la meta.</li>
                <li><strong style="color: #f39c12;">Amarillo:</strong> Rendimiento aceptable. Se ha alcanzado entre el 60% y el 79% de la meta.</li>
                <li><strong style="color: #e74c3c;">Rojo:</strong> Rendimiento bajo. Se ha alcanzado menos del 60% de la meta. Requiere atenci√≥n inmediata.</li>
            </ul>

            <div class="note">
                <strong><i class="bi bi-lightbulb-fill"></i>Nota Importante:</strong> Todos los montos en el sistema se muestran en d√≥lares estadounidenses (USD) y se formatean con el s√≠mbolo "$" y separadores de miles para facilitar la lectura. Por ejemplo: $125,450
            </div>
        </section>

        <section id="inicio-sesion">
            <h2><i class="bi bi-box-arrow-in-right"></i>Inicio de Sesi√≥n</h2>
            <p>
                Para acceder al sistema, deber√°s utilizar las mismas credenciales (usuario y contrase√±a) que usas para ingresar a Odoo.
            </p>
            <div class="note">
                <strong><i class="bi bi-key-fill"></i>Credenciales:</strong> Si tienes problemas para acceder, verifica que tu usuario y contrase√±a de Odoo sean correctos. El sistema valida la autenticaci√≥n directamente con el ERP.
            </div>
        </section>

        <section id="dashboard-internacional">
            <h2><i class="bi bi-globe2"></i>Dashboard Internacional (Principal)</h2>
            <p>
                Esta es la pantalla principal de la aplicaci√≥n. Ofrece una vista panor√°mica de las ventas internacionales del a√±o en curso.
            </p>
            <h3><i class="bi bi-funnel-fill"></i>Filtro por Cliente</h3>
            <p>
                En la parte superior izquierda, encontrar√°s un men√∫ desplegable para filtrar todos los datos del dashboard por un cliente espec√≠fico. Al seleccionar un cliente, todos los KPIs, tablas y gr√°ficos se recalcular√°n para mostrar √∫nicamente la informaci√≥n de ese cliente. Para ver los datos de todos los clientes, selecciona la opci√≥n "Todos los clientes".
            </p>
            <h3><i class="bi bi-bar-chart-line-fill"></i>KPIs Principales</h3>
            <p>
                La fila superior muestra los indicadores clave de rendimiento (KPIs) que resumen el estado actual de las ventas. Estas son las <strong>4 tarjetas principales</strong> del dashboard:
            </p>

            <h4>üìä Tarjeta 1: Venta Proyectada del A√±o</h4>
            <p><strong>¬øQu√© mide?</strong> El valor total estimado de ventas que se alcanzar√° al finalizar el a√±o, considerando tanto lo ya facturado como los compromisos pendientes.</p>
            
            <p><strong>F√≥rmula de C√°lculo:</strong></p>
            <code style="display: block; padding: 10px; background: #f5f5f5; margin: 10px 0;">
                Venta Proyectada = Facturado del A√±o + Pedidos Pendientes de Facturar
            </code>
            
            <p><strong>Origen de los Datos:</strong></p>
            <ul>
                <li><strong>Facturado del A√±o:</strong> Suma del campo <code>amount_currency</code> de todas las l√≠neas de facturas de venta internacionales confirmadas del a√±o actual (estado: Publicado). Se obtiene del modelo <code>account.move.line</code> de Odoo.</li>
                <li><strong>Pedidos Pendientes:</strong> Suma del campo <code>total_pendiente</code> de todas las l√≠neas de pedidos de venta confirmados (estado: "Pedido de Venta") que a√∫n no tienen factura asociada. Se calcula multiplicando cantidad pendiente √ó precio unitario por cada l√≠nea del modelo <code>sale.order.line</code> de Odoo.</li>
            </ul>
            
            <p><strong>Comportamiento con Filtros:</strong></p>
            <ul>
                <li><strong>Sin filtro de cliente:</strong> Suma las ventas de TODOS los clientes internacionales.</li>
                <li><strong>Con cliente seleccionado:</strong> Suma √∫nicamente las ventas del cliente filtrado.</li>
            </ul>
            
            <p><strong>Estado Visual:</strong> Esta tarjeta no tiene colores de estado (siempre es neutral).</p>

            <h4>üéØ Tarjeta 2: Meta Anual</h4>
            <p><strong>¬øQu√© mide?</strong> El objetivo de ventas establecido para el a√±o. Es el benchmark contra el cual se compara el desempe√±o real.</p>
            
            <p><strong>F√≥rmula de C√°lculo:</strong></p>
            <code style="display: block; padding: 10px; background: #f5f5f5; margin: 10px 0;">
                Meta Total = Suma de metas por l√≠nea comercial del cliente (o todos los clientes)
            </code>
            
            <p><strong>Origen de los Datos:</strong></p>
            <ul>
                <li><strong>Fuente:</strong> Google Sheets, pesta√±a espec√≠fica del a√±o (ej: "2025").</li>
                <li><strong>Estructura:</strong> Cada cliente tiene metas definidas por l√≠nea comercial (AGROVET, PETMEDICA, AVIVET).</li>
                <li><strong>Lectura:</strong> El sistema lee las metas al cargar el dashboard usando la funci√≥n <code>read_metas_por_cliente()</code> del <code>GoogleSheetsManager</code>.</li>
            </ul>
            
            <p><strong>Comportamiento con Filtros:</strong></p>
            <ul>
                <li><strong>Sin filtro de cliente:</strong> 
                    <code>Meta Total = Suma de todas las metas de todos los clientes para todas las l√≠neas</code>
                </li>
                <li><strong>Con cliente seleccionado:</strong> 
                    <code>Meta Total = Suma de metas del cliente para AGROVET + PETMEDICA + AVIVET</code>
                </li>
            </ul>
            
            <p><strong>Configuraci√≥n:</strong> Las metas se modifican en la secci√≥n <a href="#gestion-metas-cliente">Gesti√≥n de Metas por Cliente</a>.</p>
            
            <p><strong>Estado Visual:</strong> Esta tarjeta no tiene colores de estado (siempre es neutral).</p>

            <h4>üìà Tarjeta 3: Brecha Comercial</h4>
            <p><strong>¬øQu√© mide?</strong> La diferencia entre la proyecci√≥n de ventas y la meta establecida. Indica si se est√° en camino de superar, cumplir o quedar por debajo del objetivo.</p>
            
            <p><strong>F√≥rmula de C√°lculo:</strong></p>
            <code style="display: block; padding: 10px; background: #f5f5f5; margin: 10px 0;">
                Brecha Comercial = (Facturado + Pendiente) - Meta Total
                              = Venta Proyectada - Meta Total
            </code>
            
            <p><strong>Proceso de C√°lculo T√©cnico:</strong></p>
            <ol>
                <li>Se calcula <code>total_sales_year</code> sumando todas las ventas facturadas.</li>
                <li>Se calcula <code>total_por_facturar</code> sumando todos los pedidos pendientes.</li>
                <li>Se obtiene <code>meta_total_general</code> desde Google Sheets.</li>
                <li>Se aplica la f√≥rmula: <code>brecha_comercial = (total_sales_year + total_por_facturar) - meta_total_general</code></li>
            </ol>
            
            <p><strong>Interpretaci√≥n de Valores:</strong></p>
            <ul>
                <li><strong>Valor <span style="color: #27ae60;">positivo (+)</span>:</strong> Se proyecta superar la meta. Ejemplo: +$15,000 significa que se espera facturar $15,000 m√°s que el objetivo. <strong>Buena se√±al.</strong></li>
                
                <li><strong>Valor <span style="color: #e74c3c;">negativo (-)</span>:</strong> Se proyecta quedar por debajo de la meta. Ejemplo: -$8,000 significa que faltan $8,000 para alcanzar el objetivo. <strong>Requiere acciones correctivas inmediatas.</strong></li>
                
                <li><strong>Valor cercano a cero:</strong> Se proyecta cumplir exactamente con la meta (¬±2% es considerado "en meta").</li>
            </ul>
            
            <p><strong>Estados Visuales:</strong></p>
            <ul>
                <li><span style="color: #27ae60; font-weight: bold;">Verde (positivo):</span> N√∫mero verde con signo +</li>
                <li><span style="color: #e74c3c; font-weight: bold;">Rojo (negativo):</span> N√∫mero rojo con signo -</li>
                <li><span style="color: #555; font-weight: bold;">Negro (cero):</span> N√∫mero neutro</li>
            </ul>
            
            <p><strong>Actualizaci√≥n:</strong> Se recalcula cada vez que cargas el dashboard, reflejando los datos m√°s actuales de Odoo.</p>

            <h4>‚úÖ Tarjeta 4: % Avance</h4>
            <p><strong>¬øQu√© mide?</strong> El porcentaje de progreso real hacia la meta bas√°ndose <strong>exclusivamente</strong> en ventas ya facturadas (ingresos confirmados). No considera pedidos pendientes.</p>
            
            <p><strong>F√≥rmula de C√°lculo:</strong></p>
            <code style="display: block; padding: 10px; background: #f5f5f5; margin: 10px 0;">
                % Avance = (Facturado del A√±o / Meta Total) √ó 100
            </code>
            
            <p><strong>Proceso de C√°lculo T√©cnico:</strong></p>
            <ol>
                <li>Se suma el <code>amount_currency</code> de todas las facturas confirmadas del a√±o.</li>
                <li>Se obtiene la <code>meta_total_general</code> desde Google Sheets.</li>
                <li>Se divide y multiplica por 100: <code>(total_sales_year / meta_total_general) * 100</code></li>
                <li>Si <code>meta_total_general == 0</code>, el resultado es 0% (para evitar divisi√≥n por cero).</li>
            </ol>
            
            <p><strong>¬øPor qu√© no incluye pedidos pendientes?</strong> Esta m√©trica representa progreso <strong>real y confirmado</strong>, no proyectado. Solo cuenta dinero que ya fue facturado (ingreso contable registrado). Es el indicador m√°s conservador y confiable del desempe√±o.</p>
            
            <p><strong>Estados Visuales con Sem√°foro:</strong></p>
            <table style="width: 100%; border-collapse: collapse; margin: 15px 0;">
                <tr style="background: #27ae60; color: white;">
                    <td style="padding: 10px; border: 1px solid #ddd;"><strong>Verde</strong></td>
                    <td style="padding: 10px; border: 1px solid #ddd;">‚â• 80%</td>
                    <td style="padding: 10px; border: 1px solid #ddd;">Excelente progreso. Se ha alcanzado el 80% o m√°s de la meta.</td>
                </tr>
                <tr style="background: #f39c12; color: white;">
                    <td style="padding: 10px; border: 1px solid #ddd;"><strong>Amarillo</strong></td>
                    <td style="padding: 10px; border: 1px solid #ddd;">60% - 79%</td>
                    <td style="padding: 10px; border: 1px solid #ddd;">Progreso aceptable. Se est√° en camino pero se debe acelerar.</td>
                </tr>
                <tr style="background: #e74c3c; color: white;">
                    <td style="padding: 10px; border: 1px solid #ddd;"><strong>Rojo</strong></td>
                    <td style="padding: 10px; border: 1px solid #ddd;">< 60%</td>
                    <td style="padding: 10px; border: 1px solid #ddd;">Requiere atenci√≥n urgente. Muy por debajo de la meta esperada.</td>
                </tr>
            </table>
            
            <p><strong>C√≥digo de Colores en la Tarjeta:</strong></p>
            <ul>
                <li><strong>Fondo de la tarjeta:</strong> Cambia seg√∫n el rango (verde/amarillo/rojo).</li>
                <li><strong>Icono:</strong> Puede cambiar (‚úì para verde, ‚ö† para amarillo/rojo).</li>
                <li><strong>Porcentaje:</strong> Se muestra en grande con 1 decimal (ej: 75.3%).</li>
            </ul>
            
            <p><strong>Contexto Temporal:</strong> El % Avance debe interpretarse considerando en qu√© mes del a√±o estamos. Por ejemplo:</p>
            <ul>
                <li>En marzo (25% del a√±o): Esperar√≠amos ~25% de avance.</li>
                <li>En junio (50% del a√±o): Esperar√≠amos ~50% de avance.</li>
                <li>En septiembre (75% del a√±o): Esperar√≠amos ~75% de avance.</li>
            </ul>
            <p>Si el % Avance est√° significativamente por debajo del % del a√±o transcurrido, es se√±al de alerta.</p>
            </ul>
            
            <div class="note">
                <strong><i class="bi bi-calculator-fill"></i>Ejemplo de Interpretaci√≥n:</strong> Si un cliente tiene:
                <ul style="margin-top: 10px;">
                    <li>Facturado: $80,000</li>
                    <li>Pendiente: $30,000</li>
                    <li>Meta: $100,000</li>
                </ul>
                Entonces:
                <ul style="margin-top: 5px;">
                    <li>Venta Proyectada = $110,000 ($80,000 + $30,000)</li>
                    <li>Brecha = +$10,000 (proyecci√≥n supera meta)</li>
                    <li>% Avance = 80% (basado solo en lo facturado)</li>
                </ul>
            </div>
            <h3><i class="bi bi-card-checklist"></i>An√°lisis por Cliente Seleccionado</h3>
            <p>
                Cuando filtras por un cliente espec√≠fico utilizando el selector de la parte superior, el dashboard se transforma para ofrecerte un an√°lisis detallado y personalizado de ese cliente en particular:
            </p>
            
            <h4>1. Tarjeta de Avance de Facturaci√≥n</h4>
            <p>
                Aparece una nueva tarjeta destacada en la parte superior que muestra el progreso de facturaci√≥n del cliente seleccionado. Incluye:
            </p>
            <ul>
                <li><strong>Barra de Progreso con Sem√°foro:</strong> Visualizaci√≥n gr√°fica del % de facturaci√≥n completada.
                    <ul>
                        <li><span style="color: #27ae60;">Verde:</span> 80% o m√°s facturado - Cliente en excelente estado</li>
                        <li><span style="color: #f39c12;">Amarillo:</span> 60% - 79% facturado - Cliente con progreso aceptable</li>
                        <li><span style="color: #e74c3c;">Rojo:</span> Menos de 60% facturado - Cliente requiere seguimiento urgente</li>
                    </ul>
                </li>
                <li><strong>Valor Pedidos:</strong> Monto total de todos los pedidos confirmados del cliente.</li>
                <li><strong>Facturado:</strong> Monto ya facturado al cliente (ingresos confirmados).</li>
                <li><strong>% Facturado:</strong> Porcentaje que representa lo facturado sobre el total de pedidos.</li>
            </ul>

            <h4>2. Panel Ejecutivo Individual</h4>
            <p>
                Gr√°fico compacto que muestra el desempe√±o del cliente de forma visual:
            </p>
            <ul>
                <li><strong>Barra Apilada:</strong> Muestra la composici√≥n de Facturado (verde) + Pendiente (naranja)</li>
                <li><strong>L√≠nea de Meta:</strong> Marca visual que indica d√≥nde est√° ubicada la meta anual</li>
                <li><strong>Panel de Resumen:</strong> Indicadores ejecutivos calculados:
                    <ul>
                        <li><strong>% Facturado:</strong> (Facturado / Meta) √ó 100</li>
                        <li><strong>% Proyectado:</strong> ((Facturado + Pendiente) / Meta) √ó 100</li>
                        <li><strong>Brecha:</strong> (Facturado + Pendiente) - Meta</li>
                    </ul>
                </li>
            </ul>

            <h4>3. Gr√°fico de Avance por Pedido</h4>
            <p>
                Visualizaci√≥n detallada del estado de facturaci√≥n de cada pedido individual del cliente:
            </p>
            <ul>
                <li><strong>Barra Principal (exterior):</strong> Representa el valor total original del pedido de venta confirmado.</li>
                <li><strong>Barra Interior (bala):</strong> Muestra el monto que ya ha sido facturado de ese pedido.</li>
                <li><strong>Informaci√≥n del Pedido:</strong> Cada barra incluye:
                    <ul>
                        <li>N√∫mero de pedido (ID)</li>
                        <li>Nombre del cliente</li>
                        <li>Total del pedido</li>
                        <li>Monto facturado</li>
                        <li>Porcentaje de avance</li>
                    </ul>
                </li>
                <li><strong>Bot√≥n "üì¶ Productos":</strong> Permite alternar a la vista de tabla de productos del cliente.</li>
            </ul>

            <h4>4. Tabla de Productos del Cliente</h4>
            <p>
                Vista alternativa que se activa al hacer clic en el bot√≥n "üì¶ Productos" del gr√°fico de pedidos. Muestra informaci√≥n detallada de todos los productos asociados al cliente seleccionado:
            </p>
            
            <h5>Estructura de la Tabla:</h5>
            <ul>
                <li><strong>C√≥digo:</strong> C√≥digo √∫nico del producto (default_code en Odoo). Este es el identificador principal que se usa para agrupar productos.</li>
                <li><strong>Producto:</strong> Nombre comercial del producto.</li>
                <li><strong>L√≠nea Comercial:</strong> Categor√≠a o l√≠nea a la que pertenece el producto (AGROVET, PETMEDICA, AVIVET).</li>
                <li><strong>Cantidad:</strong> Cantidad total de unidades del producto (sumando lo facturado y lo pendiente).</li>
                <li><strong>Monto Total:</strong> Valor monetario total del producto para el cliente, formateado en USD.</li>
                <li><strong>Estado:</strong> Indicador visual del estado de facturaci√≥n:
                    <ul>
                        <li><span style="color: #27ae60; font-weight: bold;">Facturado</span> - Todo el monto de este producto ya fue facturado</li>
                        <li><span style="color: #e67e22; font-weight: bold;">Por Facturar</span> - Todo el monto est√° pendiente de facturaci√≥n</li>
                        <li><span style="color: #3498db; font-weight: bold;">Mixto</span> - El producto tiene facturaci√≥n parcial (una parte facturada y otra pendiente)</li>
                    </ul>
                </li>
            </ul>

            <h5>Filtros Disponibles:</h5>
            <ul>
                <li><strong>Filtro de Estado (Radio Buttons):</strong>
                    <ul>
                        <li><strong>Por Facturar (predeterminado):</strong> Muestra solo productos que tienen montos pendientes de facturar. √ötil para conocer compromisos futuros.</li>
                        <li><strong>Facturado:</strong> Muestra solo productos que ya fueron completamente facturados. √ötil para reportes de ingresos confirmados.</li>
                        <li><strong>Todos:</strong> Muestra todos los productos sin distinci√≥n de estado.</li>
                    </ul>
                </li>
                <li><strong>Filtro de L√≠nea Comercial (Selector desplegable):</strong> Permite filtrar productos por l√≠nea comercial espec√≠fica o ver todas las l√≠neas juntas. Se actualiza din√°micamente seg√∫n los productos del cliente.</li>
            </ul>

            <h5>Caracter√≠sticas Adicionales:</h5>
            <ul>
                <li><strong>Ordenamiento Autom√°tico:</strong> Los productos se ordenan de mayor a menor por monto (total, facturado o pendiente seg√∫n el filtro de estado activo).</li>
                <li><strong>Paginaci√≥n:</strong> Si hay m√°s de 15 productos, aparecen controles de navegaci√≥n (‚Üê Anterior / Siguiente ‚Üí) con informaci√≥n de p√°gina actual (ej: "P√°gina 1 de 3").</li>
                <li><strong>Agrupaci√≥n Inteligente:</strong> Los productos se agrupan por c√≥digo √∫nico (default_code), no por nombre, evitando duplicados por variaciones en los nombres.</li>
                <li><strong>Reset Autom√°tico:</strong> Al cambiar cualquier filtro, la vista regresa autom√°ticamente a la p√°gina 1.</li>
                <li><strong>Bot√≥n "‚úï Cerrar":</strong> Cierra la tabla y regresa a la vista de gr√°fico de Avance por Pedido.</li>
            </ul>

            <div class="note">
                <strong><i class="bi bi-info-circle-fill"></i>¬øCu√°ndo usar cada vista?</strong>
                <ul style="margin-top: 10px;">
                    <li><strong>Gr√°fico de Avance por Pedido:</strong> Para evaluar r√°pidamente el estado general de facturaci√≥n por pedido y detectar pedidos con bajo avance.</li>
                    <li><strong>Tabla de Productos:</strong> Para an√°lisis detallado de productos espec√≠ficos, planificaci√≥n de facturaci√≥n futura, o cuando necesites exportar/copiar informaci√≥n de productos.</li>
                </ul>
            </div>

            <div class="note">
                <strong><i class="bi bi-eye-slash-fill"></i>Ocultamiento de Gr√°fico General:</strong> Al seleccionar un cliente, el gr√°fico general "Avance de Facturaci√≥n por Cliente" se oculta autom√°ticamente para dar paso a las vistas detalladas espec√≠ficas del cliente, optimizando el espacio en pantalla y mejorando el enfoque en la informaci√≥n relevante.
            </div>



            <h3><i class="bi bi-table"></i>Tabla de Ventas por L√≠nea Comercial</h3>
            <p>
                Esta tabla estrat√©gica desglosa el rendimiento comercial por cada l√≠nea de negocio internacional, ofreciendo un an√°lisis completo que combina datos hist√≥ricos (facturado), proyecciones (pendiente) y objetivos (metas):
            </p>
            
            <h4>Columnas de la Tabla y su Significado:</h4>
            <ul>
                <li><strong>L√≠nea Comercial:</strong> Nombre de la l√≠nea de negocio (AGROVET, PETMEDICA, AVIVET). Representa una categor√≠a de productos o divisi√≥n comercial.</li>
                
                <li><strong>Venta Total ($):</strong> Monto que ya ha sido facturado durante el a√±o para esa l√≠nea comercial. Representa <strong>ingresos confirmados</strong> y registrados contablemente.
                    <ul>
                        <li>Este es dinero que ya ingres√≥ o est√° por ingresar (dependiendo de las condiciones de pago).</li>
                        <li>Se calcula sumando el campo <code>amount_currency</code> de todas las l√≠neas de factura de la l√≠nea comercial.</li>
                    </ul>
                </li>
                
                <li><strong>Por Facturar ($):</strong> Valor de los pedidos de venta confirmados que a√∫n no se han convertido en facturas. Representa <strong>compromisos comerciales pendientes</strong>.
                    <ul>
                        <li>Son ventas pr√°cticamente aseguradas pero que a√∫n no generan ingreso contable.</li>
                        <li>Se calculan sumando el valor de las l√≠neas de pedido en estado confirmado que no tienen factura asociada.</li>
                    </ul>
                </li>
                
                <li><strong>% Part. (Participaci√≥n):</strong> Porcentaje que representa la l√≠nea comercial sobre el total de ventas de todas las l√≠neas.
                    <ul>
                        <li>F√≥rmula: (Venta Total de la L√≠nea / Venta Total de Todas las L√≠neas) √ó 100</li>
                        <li>√ötil para identificar cu√°les l√≠neas son las m√°s importantes en el negocio.</li>
                        <li>Ejemplo: Si AGROVET tiene % Part. = 45%, significa que casi la mitad de las ventas provienen de esa l√≠nea.</li>
                    </ul>
                </li>
                
                <li><strong>Meta ($):</strong> Objetivo de ventas establecido para esa l√≠nea comercial durante el a√±o.
                    <ul>
                        <li>Se calcula sumando las metas individuales de cada cliente para esa l√≠nea (configuradas en "Gesti√≥n de Metas por Cliente").</li>
                        <li>Sirve como referencia para evaluar si el desempe√±o es adecuado.</li>
                    </ul>
                </li>
                
                <li><strong>Brecha ($):</strong> Diferencia entre la proyecci√≥n total y la meta de la l√≠nea.
                    <ul>
                        <li>F√≥rmula: (Venta Total + Por Facturar) - Meta</li>
                        <li><span style="color: #27ae60;">Valor positivo (+):</span> La proyecci√≥n supera la meta. La l√≠nea va bien encaminada y podr√≠a superar el objetivo.</li>
                        <li><span style="color: #e74c3c;">Valor negativo (-):</span> La proyecci√≥n est√° por debajo de la meta. Indica que se necesitan acciones para alcanzar el objetivo (buscar m√°s ventas, acelerar pedidos pendientes, etc.).</li>
                        <li>Ejemplo: Brecha = -$10,000 significa que falta generar $10,000 adicionales para cumplir la meta.</li>
                    </ul>
                </li>
                
                <li><strong>% Avance:</strong> Porcentaje de progreso hacia la meta considerando √∫nicamente lo que ya fue facturado (no incluye lo pendiente).
                    <ul>
                        <li>F√≥rmula: (Venta Total / Meta) √ó 100</li>
                        <li>Es el indicador m√°s conservador porque solo cuenta ingresos confirmados.</li>
                        <li>Interpretaci√≥n por color (sem√°foro):
                            <ul>
                                <li><span style="color: #27ae60;">‚â• 80%:</span> Verde - Excelente desempe√±o</li>
                                <li><span style="color: #f39c12;">60% - 79%:</span> Amarillo - Desempe√±o aceptable</li>
                                <li><span style="color: #e74c3c;">< 60%:</span> Rojo - Requiere atenci√≥n urgente</li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>

            <h4>C√≥mo Interpretar la Tabla - Ejemplo Pr√°ctico:</h4>
            <div class="note">
                <strong><i class="bi bi-calculator-fill"></i>Ejemplo: L√≠nea AGROVET</strong>
                <ul style="margin-top: 10px;">
                    <li>Venta Total: $85,000</li>
                    <li>Por Facturar: $20,000</li>
                    <li>% Part.: 42%</li>
                    <li>Meta: $100,000</li>
                    <li>Brecha: +$5,000</li>
                    <li>% Avance: 85%</li>
                </ul>
                <strong>Interpretaci√≥n:</strong>
                <ul style="margin-top: 10px;">
                    <li>AGROVET representa el 42% del negocio (es la l√≠nea m√°s importante).</li>
                    <li>Ya se facturaron $85,000 de los $100,000 de meta (85% de avance) - <span style="color: #27ae60;">Estado: Verde</span></li>
                    <li>Hay $20,000 adicionales en pedidos pendientes.</li>
                    <li>Proyecci√≥n total: $105,000 ($85,000 + $20,000)</li>
                    <li>La brecha es positiva (+$5,000), lo que significa que se superar√° la meta si se facturan todos los pedidos pendientes.</li>
                    <li><strong>Conclusi√≥n:</strong> L√≠nea en excelente estado, cumplir√° y superar√° la meta.</li>
                </ul>
            </div>

            <h4>Fila de Totales:</h4>
            <p>
                La √∫ltima fila de la tabla (generalmente en negrita) muestra la suma de todas las l√≠neas comerciales:
            </p>
            <ul>
                <li><strong>Total Venta:</strong> Suma de todas las ventas facturadas.</li>
                <li><strong>Total Por Facturar:</strong> Suma de todos los pedidos pendientes.</li>
                <li><strong>% Part.:</strong> Siempre ser√° 100% (representa el total).</li>
                <li><strong>Total Meta:</strong> Suma de todas las metas de las l√≠neas.</li>
                <li><strong>Brecha Total:</strong> Diferencia entre proyecci√≥n total y meta total de la empresa.</li>
                <li><strong>% Avance Global:</strong> Progreso general de la empresa hacia su meta anual.</li>
            </ul>
            <h3><i class="bi bi-pie-chart-fill"></i>Gr√°ficos de An√°lisis</h3>
            <p>
                La secci√≥n inferior del dashboard contiene m√∫ltiples gr√°ficos interactivos dise√±ados para facilitar el an√°lisis visual de las ventas desde diferentes perspectivas. Estos gr√°ficos est√°n interconectados y se actualizan din√°micamente seg√∫n los filtros aplicados.
            </p>

            <h4>1. An√°lisis Jer√°rquico de Ventas (Drill-Down de 5 Niveles)</h4>
            <p>
                Este es uno de los gr√°ficos m√°s potentes del sistema. Permite explorar las ventas a trav√©s de una jerarqu√≠a de 5 niveles, permiti√©ndote "profundizar" desde categor√≠as amplias hasta productos espec√≠ficos.
            </p>
            
            <h5>üîß Funcionamiento T√©cnico Interno:</h5>
            <p><strong>Origen de los Datos:</strong></p>
            <ul>
                <li><strong>Nivel 1 (Clasificaci√≥n Farmacol√≥gica):</strong> Campo <code>pharmacological_classification_id</code> de las l√≠neas de factura en Odoo.</li>
                <li><strong>Nivel 2 (Formas Farmac√©uticas):</strong> Campo <code>pharmaceutical_forms_id</code> del producto asociado.</li>
                <li><strong>Nivel 3 (V√≠a de Administraci√≥n):</strong> Campo <code>administration_route_id</code> del producto.</li>
                <li><strong>Nivel 4 (L√≠nea de Producci√≥n):</strong> Campo <code>production_line_id</code> del producto.</li>
                <li><strong>Nivel 5 (Producto):</strong> Campo <code>product_id</code> (nombre del producto).</li>
            </ul>
            
            <p><strong>Proceso de Construcci√≥n del Gr√°fico:</strong></p>
            <ol>
                <li><strong>Lectura de datos:</strong> Al cargar el dashboard, se itera sobre todas las l√≠neas de factura (<code>sales_data_international</code>).</li>
                <li><strong>Agrupaci√≥n jer√°rquica:</strong> Se construye un diccionario multinivel (<code>drilldown_data</code>) donde cada nivel contiene:
                    <ul>
                        <li>Clave: ID del elemento actual (ej: "Antibi√≥ticos", "Comprimidos")</li>
                        <li>Valor: Objeto con <code>venta</code> (monto acumulado) y <code>children</code> (siguiente nivel)</li>
                    </ul>
                </li>
                <li><strong>Normalizaci√≥n de productos:</strong> Se aplica un mapeo de nombres usando la funci√≥n <code>normalize_product_name()</code> que unifica 13 productos especiales:
                    <code style="display: block; padding: 5px; background: #f5f5f5; margin: 5px 0;">
                    ATREVIA 360¬∞ ‚Üí ATREVIA 360<br>
                    ATREVIA ONE ‚Üí ATREVIA ONE<br>
                    BIOCAN ‚Üí BIOCAN<br>
                    SURALAN ‚Üí SURALAN<br>
                    ... (9 productos m√°s)
                    </code>
                </li>
                <li><strong>Filtrado:</strong> Se excluyen autom√°ticamente elementos con valor "No Definido" en cualquier nivel.</li>
                <li><strong>Ordenamiento:</strong> Cada nivel se ordena descendente por <code>amount_currency</code> (de mayor a menor venta).</li>
            </ol>
            
            <p><strong>Mecanismo de Navegaci√≥n (Drill-Down):</strong></p>
            <ul>
                <li>Al hacer clic en una barra, se ejecuta JavaScript que:
                    <ol>
                        <li>Identifica el elemento clickeado y su nivel actual.</li>
                        <li>Busca en <code>drilldown_data</code> el sub-nivel correspondiente (propiedad <code>children</code>).</li>
                        <li>Destruye el gr√°fico ECharts actual usando <code>drillChart.dispose()</code>.</li>
                        <li>Crea un nuevo gr√°fico ECharts con los datos del siguiente nivel.</li>
                        <li>Actualiza el t√≠tulo din√°micamente seg√∫n el nivel.</li>
                        <li>Muestra el bot√≥n "Volver" si no est√°s en el nivel 1.</li>
                        <li>Dispara un evento para actualizar el gr√°fico de pastel sincronizado.</li>
                    </ol>
                </li>
            </ul>
            
            <p><strong>Jerarqu√≠a de Niveles:</strong></p>
            <ol>
                <li><strong>Nivel 1 - Clasificaci√≥n Farmacol√≥gica:</strong> Categorizaci√≥n de productos seg√∫n su uso terap√©utico o aplicaci√≥n principal (ej: Antibi√≥ticos, Antiparasitarios, Nutricionales).</li>
                <li><strong>Nivel 2 - Formas Farmac√©uticas:</strong> Presentaci√≥n f√≠sica del producto (ej: Comprimidos, Suspensi√≥n Oral, Inyectable, Polvo).</li>
                <li><strong>Nivel 3 - V√≠a de Administraci√≥n:</strong> M√©todo de aplicaci√≥n del producto (ej: Oral, Parenteral, T√≥pica, Sublingual).</li>
                <li><strong>Nivel 4 - L√≠nea de Producci√≥n:</strong> L√≠nea de manufactura o categor√≠a de producto dentro de la empresa.</li>
                <li><strong>Nivel 5 - Producto:</strong> Nombre espec√≠fico del producto final.</li>
            </ol>

            <h5>Caracter√≠sticas del An√°lisis Jer√°rquico:</h5>
            <ul>
                <li><strong>Navegaci√≥n Interactiva:</strong> Haz clic en cualquier barra para "profundizar" al siguiente nivel de detalle. El gr√°fico se actualiza mostrando el desglose del elemento seleccionado.</li>
                
                <li><strong>T√≠tulo Din√°mico:</strong> El t√≠tulo del gr√°fico cambia seg√∫n el nivel actual de navegaci√≥n. Ejemplos:
                    <ul>
                        <li>"An√°lisis Jer√°rquico: Ventas por Clasificaci√≥n Farmacol√≥gica" (Nivel 1)</li>
                        <li>"An√°lisis Jer√°rquico: Ventas por Forma Farmac√©utica" (Nivel 2)</li>
                        <li>"An√°lisis Jer√°rquico: Ventas por Producto" (Nivel 5)</li>
                    </ul>
                </li>
                
                <li><strong>Sincronizaci√≥n Bidireccional:</strong> Al navegar entre niveles, el gr√°fico de pastel "Top Productos por Venta" (ubicado a la derecha) se actualiza autom√°ticamente para mostrar los top 20 productos del nivel actual, manteniendo coherencia visual.</li>
                
                <li><strong>Ordenamiento Inteligente:</strong> Todas las barras se ordenan autom√°ticamente de mayor a menor por monto de venta, facilitando la identificaci√≥n de los elementos m√°s importantes.</li>
                
                <li><strong>Filtrado Autom√°tico:</strong> El sistema excluye autom√°ticamente productos marcados como "No Definido" en todos los niveles, asegurando que solo se visualicen datos v√°lidos y √∫tiles.</li>
                
                <li><strong>Normalizaci√≥n de Nombres:</strong> El sistema agrupa correctamente productos con nombres similares o variantes. Por ejemplo: "ATREVIA 360¬∞", "ATREVIA ONE", "BIOCAN", "SURALAN", etc., tienen nombres normalizados para evitar duplicados y garantizar agrupaci√≥n consistente.</li>
                
                <li><strong>Bot√≥n "Volver":</strong> Permite retroceder al nivel anterior de la jerarqu√≠a. Aparece cuando est√°s en niveles 2-5, facilitando la navegaci√≥n hacia atr√°s sin necesidad de recargar la p√°gina.</li>
            </ul>

            <h5>C√≥mo usar el An√°lisis Jer√°rquico:</h5>
            <div class="note">
                <strong><i class="bi bi-lightbulb-fill"></i>Ejemplo de Uso:</strong>
                <ol style="margin-top: 10px;">
                    <li>Inicias en Nivel 1 viendo las ventas por "Clasificaci√≥n Farmacol√≥gica" y notas que "Antibi√≥ticos" tiene ventas altas.</li>
                    <li>Haces clic en la barra "Antibi√≥ticos" ‚Üí Avanzas al Nivel 2 y ves que dentro de Antibi√≥ticos, la forma "Inyectable" es la m√°s vendida.</li>
                    <li>Haces clic en "Inyectable" ‚Üí Nivel 3 muestra que la v√≠a "Parenteral" domina.</li>
                    <li>Contin√∫as navegando hasta llegar a productos espec√≠ficos en el Nivel 5.</li>
                    <li>Usas el bot√≥n "Volver" para regresar y explorar otras ramas de la jerarqu√≠a.</li>
                </ol>
            </div>

            <h4>2. Top Productos por Venta (Gr√°fico de Pastel Tipo Donut)</h4>
            <p>
                Gr√°fico circular complementario que muestra los 20 productos con mayor facturaci√≥n del nivel actual del An√°lisis Jer√°rquico.
            </p>
            
            <h5>üîß Funcionamiento T√©cnico Interno:</h5>
            <p><strong>Proceso de Generaci√≥n:</strong></p>
            <ol>
                <li><strong>Agrupaci√≥n de productos:</strong> Se usa un <code>Map</code> de JavaScript con clave = <code>productoCodigo</code> (default_code de Odoo).</li>
                <li><strong>Acumulaci√≥n de ventas:</strong> Para cada l√≠nea de factura, se suma <code>amount_currency</code> al producto correspondiente.</li>
                <li><strong>Normalizaci√≥n:</strong> Se aplica la misma funci√≥n <code>normalize_product_name()</code> del gr√°fico jer√°rquico.</li>
                <li><strong>Ordenamiento:</strong> Se ordena descendente por monto total de venta.</li>
                <li><strong>Limitaci√≥n:</strong> Se toman solo los primeros 20 productos (top 20).</li>
                <li><strong>C√°lculo de porcentajes:</strong> 
                    <code style="display: block; padding: 5px; background: #f5f5f5; margin: 5px 0;">
                    % = (Venta del Producto / Suma de Ventas de los Top 20) √ó 100
                    </code>
                </li>
            </ol>
            
            <p><strong>Sincronizaci√≥n con An√°lisis Jer√°rquico:</strong></p>
            <ul>
                <li>El gr√°fico "escucha" eventos del gr√°fico jer√°rquico usando un sistema de eventos custom de JavaScript.</li>
                <li>Cuando el usuario navega en el drill-down, se dispara un evento <code>drilldownChange</code>.</li>
                <li>El gr√°fico de pastel recibe el evento con los datos del nivel actual.</li>
                <li>Se recalculan los top 20 productos del contexto actual (puede ser top 20 de una forma farmac√©utica espec√≠fica, por ejemplo).</li>
                <li>Se actualiza el t√≠tulo: <code>"Top Productos - [Nivel]: [Elemento Seleccionado]"</code></li>
                <li>Se redibuja el gr√°fico con ECharts usando <code>chart.setOption(newOptions)</code>.</li>
            </ul>
            
            <p><strong>Configuraci√≥n de ECharts:</strong></p>
            <ul>
                <li><strong>Formato Donut:</strong> Radio interno 30%, radio externo 60% (configurado en <code>series.radius: ['30%', '60%']</code>).</li>
                <li><strong>Labels:</strong> Posici√≥n <code>outside</code> con formato <code>'{b}: {d}%'</code> donde {b}=nombre, {d}=porcentaje.</li>
                <li><strong>Colores:</strong> Paleta predefinida de ECharts con 20 colores distintos.</li>
                <li><strong>Hover:</strong> Efecto de agrandamiento configurado en <code>emphasis.scale: 1.1</code>.</li>
            </ul>
            
            <ul>
                <li><strong>Formato Donut:</strong> Visualizaci√≥n con anillo central (radio interno 30%, radio externo 60%) que mejora la legibilidad al crear espacio en el centro.</li>
                
                <li><strong>Porcentajes Visibles:</strong> Cada segmento muestra directamente "Nombre: XX%" haciendo f√°cil identificar la proporci√≥n de cada producto sin necesidad de pasar el cursor.</li>
                
                <li><strong>Tooltip Mejorado:</strong> Al pasar el cursor sobre un segmento, aparece informaci√≥n detallada:
                    <ul>
                        <li>Nombre completo del producto</li>
                        <li>Monto de venta formateado en USD (ej: $45,230)</li>
                        <li>Porcentaje exacto con decimales</li>
                        <li>Hint: "Haz clic en el gr√°fico de barras para filtrar"</li>
                    </ul>
                </li>
                
                <li><strong>Sincronizaci√≥n Autom√°tica:</strong> Se actualiza autom√°ticamente cuando navegas en el gr√°fico jer√°rquico, mostrando siempre el top 20 del contexto actual.</li>
                
                <li><strong>T√≠tulo Din√°mico:</strong> Cambia seg√∫n el nivel activo del gr√°fico jer√°rquico. Ejemplos:
                    <ul>
                        <li>"Top Productos - Clasificaci√≥n Farmacol√≥gica: Antibi√≥ticos"</li>
                        <li>"Top Productos - Forma Farmac√©utica: Comprimidos"</li>
                    </ul>
                </li>
                
                <li><strong>Agrupaci√≥n por C√≥digo:</strong> Los productos se agrupan usando su c√≥digo √∫nico (default_code) y nombres normalizados, evitando que variaciones menores en los nombres creen entradas duplicadas.</li>
            </ul>

            <h4>3. Venta Internacional del A√±o por L√≠nea Comercial</h4>
            <p>
                Gr√°fico de barras verticales que compara la meta vs. lo facturado para cada l√≠nea comercial (AGROVET, PETMEDICA, AVIVET).
            </p>
            
            <h5>üîß Funcionamiento T√©cnico Interno:</h5>
            <p><strong>Origen de Datos:</strong></p>
            <ul>
                <li><strong>L√≠neas comerciales:</strong> Campo <code>commercial_line_international_id</code> de las l√≠neas de factura de Odoo.</li>
                <li><strong>Ventas facturadas:</strong> Suma de <code>amount_currency</code> de todas las l√≠neas de factura agrupadas por l√≠nea comercial.</li>
                <li><strong>Metas:</strong> Suma de las metas por cliente para cada l√≠nea comercial, obtenidas de Google Sheets.</li>
            </ul>
            
            <p><strong>Proceso de Construcci√≥n:</strong></p>
            <ol>
                <li><strong>Agrupaci√≥n:</strong> Se itera sobre <code>sales_data_international</code> y se agrupa por <code>linea_comercial</code>.</li>
                <li><strong>Suma de ventas:</strong> Para cada l√≠nea, se acumula <code>venta_total = suma de amount_currency</code>.</li>
                <li><strong>C√°lculo de meta:</strong> 
                    <ul>
                        <li>Si hay cliente seleccionado: <code>meta_linea = metas_clientes_a√±o[partner_id][linea_id]</code></li>
                        <li>Si no hay cliente: <code>meta_linea = suma de todas las metas de esa l√≠nea de todos los clientes</code></li>
                    </ul>
                </li>
                <li><strong>Preparaci√≥n de datos:</strong> Se crea un array con objetos <code>{ linea: nombre, meta: valor, facturado: valor }</code></li>
                <li><strong>Renderizado con Chart.js:</strong> Se usa un gr√°fico de barras (<code>type: 'bar'</code>) con dos datasets.</li>
            </ol>
            
            <p><strong>Interactividad (Filtro de Productos):</strong></p>
            <ol>
                <li>Cada barra tiene un evento <code>onClick</code> configurado.</li>
                <li>Al hacer clic, se captura el <code>datasetIndex</code> y el <code>index</code> de la barra.</li>
                <li>Se identifica la l√≠nea comercial clickeada.</li>
                <li>Se dispara una funci√≥n que filtra los datos de productos:
                    <code style="display: block; padding: 5px; background: #f5f5f5; margin: 5px 0;">
                    productos_filtrados = productos.filter(p => p.linea_comercial === linea_seleccionada)
                    </code>
                </li>
                <li>Se actualiza el gr√°fico "Top Productos Facturados" con solo los top 7 de esa l√≠nea.</li>
                <li>Aparece el bot√≥n "‚úï Ver Todos" para resetear el filtro.</li>
            </ol>
            
            <ul>
                <li><strong>Barras Comparativas:</strong> Cada l√≠nea comercial tiene dos barras:
                    <ul>
                        <li><span style="color: #3498db;">Azul:</span> Meta establecida</li>
                        <li><span style="color: #27ae60;">Verde:</span> Monto facturado</li>
                    </ul>
                </li>
                
                <li><strong>Interactividad con Productos:</strong> Al hacer clic en una l√≠nea comercial, se filtra autom√°ticamente el gr√°fico "Top Productos Facturados" para mostrar solo los top productos de esa l√≠nea espec√≠fica.</li>
                
                <li><strong>Bot√≥n "‚úï Ver Todos":</strong> Aparece cuando hay un filtro activo. Al hacer clic, resetea el filtro y vuelve a mostrar el top general de todos los productos.</li>
                
                <li><strong>Indicador Visual:</strong> La diferencia entre las barras te permite identificar r√°pidamente:
                    <ul>
                        <li>Barra verde m√°s alta que azul: L√≠nea super√≥ la meta</li>
                        <li>Barra verde m√°s baja que azul: L√≠nea est√° por debajo de la meta</li>
                        <li>Barras similares: L√≠nea cerca de cumplir la meta</li>
                    </ul>
                </li>
            </ul>

            <h4>4. Top Productos Facturados (Barras Horizontales)</h4>
            <p>
                Gr√°fico de barras horizontales que muestra los 7 productos con mayor volumen de facturaci√≥n.
            </p>
            <ul>
                <li><strong>Ordenamiento:</strong> Los productos est√°n ordenados de arriba hacia abajo por monto de facturaci√≥n (de mayor a menor).</li>
                
                <li><strong>Filtro por L√≠nea Comercial:</strong> Se actualiza din√°micamente cuando haces clic en una l√≠nea comercial del gr√°fico anterior, mostrando solo los top productos de esa l√≠nea.</li>
                
                <li><strong>Vista General:</strong> Cuando no hay filtro activo, muestra los 7 productos m√°s vendidos de todas las l√≠neas comerciales combinadas.</li>
                
                <li><strong>Informaci√≥n Mostrada:</strong> Cada barra incluye el nombre del producto y su monto de facturaci√≥n formateado.</li>
            </ul>

            <h4>5. Avance de Facturaci√≥n por Cliente (Vista General)</h4>
            <p>
                Gr√°fico tipo "bullet chart" que compara el avance de todos los clientes internacionales. <strong>Solo se muestra cuando NO hay ning√∫n cliente seleccionado en el filtro principal.</strong>
            </p>
            <ul>
                <li><strong>Estructura:</strong> Cada cliente tiene:
                    <ul>
                        <li><strong>Barra gris (fondo):</strong> Valor total de los pedidos confirmados</li>
                        <li><strong>Barra de color (frente):</strong> Monto ya facturado, con color tipo sem√°foro:
                            <ul>
                                <li><span style="color: #27ae60;">Verde:</span> ‚â•80% facturado</li>
                                <li><span style="color: #f39c12;">Amarillo:</span> 60-79% facturado</li>
                                <li><span style="color: #e74c3c;">Rojo:</span> <60% facturado</li>
                            </ul>
                        </li>
                    </ul>
                </li>
                
                <li><strong>Porcentaje Visible:</strong> Cada barra muestra el % de facturaci√≥n completada, permitiendo evaluaci√≥n r√°pida del estado de cada cliente.</li>
                
                <li><strong>Orden:</strong> Los clientes se pueden ordenar alfab√©ticamente o por porcentaje de avance, seg√∫n la configuraci√≥n del gr√°fico.</li>
            </ul>

            <h4>6. Panel Ejecutivo - Desempe√±o por Cliente</h4>
            <p>
                Gr√°fico que cambia su visualizaci√≥n seg√∫n si hay o no un cliente seleccionado en el filtro principal:
            </p>
            
            <h5>Modo General (sin cliente seleccionado):</h5>
            <ul>
                <li><strong>Vista Comparativa:</strong> Barras apiladas horizontales para todos los clientes mostrando:
                    <ul>
                        <li><span style="color: #27ae60;">Facturado</span> (segmento verde)</li>
                        <li><span style="color: #e67e22;">Pendiente</span> (segmento naranja)</li>
                        <li>L√≠nea de meta (marca visual)</li>
                    </ul>
                </li>
                <li><strong>Navegaci√≥n:</strong> Al hacer clic en una l√≠nea comercial del gr√°fico de l√≠neas, puedes navegar a ese cliente espec√≠fico.</li>
            </ul>

            <h5>Modo Individual (cliente seleccionado):</h5>
            <ul>
                <li><strong>Vista Compacta:</strong> Barra √∫nica apilada que muestra la composici√≥n de Facturado + Pendiente del cliente seleccionado.</li>
                <li><strong>Resumen Ejecutivo:</strong> Panel lateral con KPIs calculados:
                    <ul>
                        <li><strong>% Facturado:</strong> Porcentaje de la meta ya facturado</li>
                        <li><strong>% Proyectado:</strong> Porcentaje que se alcanzar√° si se factura todo lo pendiente</li>
                        <li><strong>Brecha:</strong> Diferencia monetaria entre proyecci√≥n y meta</li>
                    </ul>
                </li>
            </ul>

            <div class="note">
                <strong><i class="bi bi-lightbulb-fill"></i>Tip de Navegaci√≥n:</strong> Los gr√°ficos est√°n dise√±ados para trabajar juntos. Experimenta haciendo clic en diferentes elementos para descubrir las interacciones y filtros autom√°ticos. Por ejemplo:
                <ul style="margin-top: 10px;">
                    <li>Navega por el An√°lisis Jer√°rquico y observa c√≥mo el gr√°fico de pastel se actualiza.</li>
                    <li>Haz clic en una l√≠nea comercial y mira c√≥mo se filtran los productos.</li>
                    <li>Selecciona un cliente y descubre toda la informaci√≥n detallada que aparece.</li>
                </ul>
            </div>
        </section>

        <section id="gestion-metas-linea">
            <h2><i class="bi bi-bullseye"></i>Gesti√≥n de Metas (por L√≠nea)</h2>
            <p>
                Esta secci√≥n (accesible desde el Dashboard Nacional) permite establecer las metas de venta mensuales para cada l√≠nea comercial nacional y para E-commerce. La interfaz ha sido redise√±ada para ser m√°s clara y moderna.
            </p>
            <ol>
                <li><strong>Selecciona un mes:</strong> Usa el selector de la parte superior para elegir el mes para el cual deseas definir las metas.</li>
                <li><strong>Ingresa las metas:</strong> Para cada l√≠nea comercial, ver√°s una "tarjeta" individual. Rellena los campos "Meta Total" y "Meta IPN".</li>
                <li><strong>Visualiza los totales:</strong> Una tarjeta de resumen en la parte inferior muestra la suma total de las metas que has ingresado, actualiz√°ndose en tiempo real.</li>
                <li><strong>Guarda los cambios:</strong> Haz clic en el bot√≥n <strong>"Guardar Metas"</strong>. Los datos se almacenar√°n en Google Sheets.</li>
            </ol>
        </section>

        <section id="gestion-metas-cliente">
            <h2><i class="bi bi-person-check-fill"></i>Gesti√≥n de Metas (por Cliente)</h2>
            <p>
                Esta secci√≥n, accesible desde el men√∫ de navegaci√≥n del Dashboard Internacional, es donde se definen las metas de venta anuales para cada cliente internacional. Estos datos son la base para los KPIs y la tabla de rendimiento del dashboard.
            </p>
            <ol>
                <li><strong>Selecciona un a√±o:</strong> Usa el men√∫ desplegable en la parte superior para elegir el a√±o para el cual deseas ver o editar las metas.</li>
                <li><strong>Ingresa las metas:</strong> La p√°gina muestra una tabla con todos los clientes internacionales. Para cada cliente, puedes ingresar la meta de venta anual en las columnas correspondientes a cada l√≠nea comercial (AGROVET, PETMEDICA, AVIVET).</li>
                <li><strong>C√°lculos autom√°ticos:</strong>
                    <ul>
                        <li>La columna <strong>"Total Cliente ($)"</strong> se actualiza autom√°ticamente a medida que ingresas los n√∫meros, mostrando la meta total para cada cliente.</li>
                        <li>La fila inferior <strong>"Total por L√≠nea"</strong> suma las metas de todos los clientes para cada l√≠nea comercial.</li>
                        <li>La celda <strong>"Total General"</strong> muestra la suma de todas las metas.</li>
                    </ul>
                </li>
                <li><strong>Guarda los cambios:</strong> Cuando termines, haz clic en el bot√≥n <strong>"Guardar Metas"</strong>. Los datos se almacenar√°n en Google Sheets y se usar√°n en el dashboard principal.</li>
            </ol>
            <div class="note">
                <strong><i class="bi bi-check-circle-fill"></i>Persistencia de Datos:</strong> Despu√©s de guardar, los valores que ingresaste permanecer√°n en los campos, permiti√©ndote continuar editando o verificando sin que se borren.
            </div>
        </section>

        <section id="vistas-detalladas">
            <h2><i class="bi bi-layout-text-sidebar-reverse"></i>Vistas Detalladas</h2>
            <p>
                Desde el men√∫ de navegaci√≥n superior del dashboard, puedes acceder a vistas de tabla completas que muestran el detalle transaccional de las ventas. Estas vistas son ideales para auditor√≠as, reportes detallados y b√∫squedas espec√≠ficas.
            </p>
            
            <h3>1. Ventas Facturadas (<code>/sales</code>)</h3>
            <p>
                Muestra una tabla detallada con todas las l√≠neas de facturas de venta internacionales registradas en el sistema.
            </p>
            
            <h4>Informaci√≥n mostrada:</h4>
            <ul>
                <li><strong>Fecha:</strong> Fecha de emisi√≥n de la factura.</li>
                <li><strong>Factura:</strong> N√∫mero de documento de la factura.</li>
                <li><strong>Cliente:</strong> Nombre completo del cliente internacional.</li>
                <li><strong>Producto:</strong> Nombre del producto vendido.</li>
                <li><strong>Descripci√≥n:</strong> Descripci√≥n completa del producto, incluyendo presentaci√≥n y medida (campo consolidado).</li>
                <li><strong>Cantidad:</strong> Cantidad de unidades vendidas en esa l√≠nea.</li>
                <li><strong>L√≠nea Comercial:</strong> Categor√≠a comercial del producto (AGROVET, PETMEDICA, AVIVET).</li>
                <li><strong>Importe:</strong> Valor monetario de la l√≠nea en USD (campo <code>amount_currency</code> de Odoo).</li>
                <li><strong>Estado:</strong> Estado de la factura (Borrador, Publicado, Cancelado, etc.).</li>
            </ul>

            <h4>Herramientas de Filtrado y B√∫squeda:</h4>
            <ul>
                <li><strong>Filtro por Fechas:</strong> 
                    <ul>
                        <li>Fecha Inicio: Define la fecha m√≠nima de las facturas a mostrar.</li>
                        <li>Fecha Fin: Define la fecha m√°xima de las facturas a mostrar.</li>
                        <li>Al aplicar ambos filtros, solo se mostrar√°n facturas dentro de ese rango.</li>
                    </ul>
                </li>
                
                <li><strong>Filtro por Cliente:</strong> Selector desplegable que permite filtrar todas las facturas de un cliente espec√≠fico. √ötil para auditor√≠as por cliente o para generar reportes individuales.</li>
                
                <li><strong>Campo de B√∫squeda General:</strong> Permite buscar por cualquier texto presente en la tabla (n√∫mero de factura, nombre de producto, descripci√≥n, etc.). La b√∫squeda es instant√°nea y resalta los resultados coincidentes.</li>
                
                <li><strong>Bot√≥n "Filtrar":</strong> Aplica todos los filtros seleccionados simult√°neamente.</li>
                
                <li><strong>Bot√≥n "Limpiar Filtros":</strong> Resetea todos los filtros y muestra nuevamente todas las ventas sin restricciones.</li>
            </ul>

            <h4>Funcionalidades Adicionales:</h4>
            <ul>
                <li><strong>Paginaci√≥n:</strong> Si hay muchos registros, la tabla se divide en p√°ginas para facilitar la navegaci√≥n. Controles en la parte inferior permiten cambiar de p√°gina.</li>
                <li><strong>Ordenamiento:</strong> Haz clic en los encabezados de columna para ordenar ascendente o descendentemente por ese campo.</li>
                <li><strong>Exportaci√≥n a Excel:</strong> Bot√≥n que descarga toda la informaci√≥n filtrada a un archivo .xlsx para an√°lisis offline.</li>
            </ul>

            <h3>2. Pedidos Pendientes de Facturar (<code>/pending</code>)</h3>
            <p>
                Muestra una tabla detallada con todos los pedidos de venta internacionales que han sido confirmados pero a√∫n no se han facturado. Esta vista es cr√≠tica para la gesti√≥n del flujo de caja y planificaci√≥n de entregas.
            </p>
            
            <h4>Informaci√≥n mostrada:</h4>
            <ul>
                <li><strong>Pedido:</strong> N√∫mero de identificaci√≥n del pedido de venta.</li>
                <li><strong>Cliente:</strong> Nombre completo del cliente que realiz√≥ el pedido.</li>
                <li><strong>Producto:</strong> Nombre del producto incluido en el pedido.</li>
                <li><strong>Descripci√≥n:</strong> Descripci√≥n completa del producto, incluyendo presentaci√≥n y medida (campo consolidado).</li>
                <li><strong>Cantidad:</strong> Cantidad de unidades del producto en el pedido.</li>
                <li><strong>L√≠nea Comercial:</strong> Categor√≠a comercial del producto (AGROVET, PETMEDICA, AVIVET).</li>
                <li><strong>Total Pendiente:</strong> Valor monetario pendiente de facturar en USD. Representa el monto que se convertir√° en ingreso cuando se emita la factura.</li>
                <li><strong>Estado Pedido:</strong> Estado actual del pedido en Odoo:
                    <ul>
                        <li><strong>Cotizaci√≥n:</strong> Pedido en fase de negociaci√≥n, no confirmado.</li>
                        <li><strong>Pedido de Venta:</strong> Pedido confirmado, comprometido para entrega.</li>
                        <li><strong>Bloqueado:</strong> Pedido con alguna restricci√≥n o bloqueo administrativo.</li>
                        <li><strong>Cancelado:</strong> Pedido anulado (generalmente no aparece en esta vista).</li>
                    </ul>
                </li>
            </ul>

            <h4>Herramientas de Filtrado y B√∫squeda:</h4>
            <ul>
                <li><strong>Filtro por Fechas:</strong> Similar a la vista de Ventas, permite definir un rango de fechas para filtrar pedidos por su fecha de creaci√≥n o confirmaci√≥n.</li>
                
                <li><strong>Filtro por Cliente:</strong> Selector para filtrar pedidos de un cliente espec√≠fico. √ötil para hacer seguimiento de compromisos pendientes por cliente.</li>
                
                <li><strong>Campo de B√∫squeda General:</strong> B√∫squeda instant√°nea por n√∫mero de pedido, producto, descripci√≥n, etc.</li>
                
                <li><strong>Bot√≥n "Filtrar":</strong> Aplica los filtros seleccionados.</li>
                
                <li><strong>Bot√≥n "Limpiar Filtros":</strong> Resetea todos los filtros a su estado inicial.</li>
            </ul>

            <h4>Funcionalidades Adicionales:</h4>
            <ul>
                <li><strong>Paginaci√≥n:</strong> Navegaci√≥n por p√°ginas cuando hay muchos registros.</li>
                <li><strong>Ordenamiento:</strong> Click en encabezados para ordenar por cualquier columna.</li>
                <li><strong>Exportaci√≥n a Excel:</strong> Descarga los pedidos pendientes filtrados a formato .xlsx.</li>
            </ul>

            <h4>Estados de Pedido - Interpretaci√≥n Detallada:</h4>
            <div class="note">
                <strong><i class="bi bi-info-circle-fill"></i>¬øQu√© significa cada estado?</strong>
                <ul style="margin-top: 10px;">
                    <li><strong>Cotizaci√≥n:</strong> El cliente solicit√≥ una propuesta pero a√∫n no confirm√≥ la compra. El monto NO se incluye en las proyecciones del dashboard principal.</li>
                    
                    <li><strong>Pedido de Venta:</strong> El cliente confirm√≥ la compra. El pedido est√° comprometido para ser entregado y facturado. Este monto S√ç se incluye en la "Venta Proyectada" del dashboard.</li>
                    
                    <li><strong>Bloqueado:</strong> El pedido est√° confirmado pero tiene alguna restricci√≥n (puede ser por cr√©dito, stock, aprobaciones internas, etc.). Dependiendo de la configuraci√≥n, puede o no incluirse en proyecciones.</li>
                    
                    <li><strong>Cancelado:</strong> El pedido fue anulado. No se incluye en ning√∫n c√°lculo y generalmente no aparece en esta vista.</li>
                </ul>
            </div>

            <h4>Casos de Uso Pr√°cticos:</h4>
            <ul>
                <li><strong>Planificaci√≥n de Flujo de Caja:</strong> Filtra por fechas para ver qu√© pedidos est√°n programados para facturarse en un per√≠odo espec√≠fico.</li>
                <li><strong>Seguimiento de Cliente:</strong> Filtra por cliente para revisar todos sus compromisos pendientes y hacer seguimiento de entregas.</li>
                <li><strong>An√°lisis por L√≠nea Comercial:</strong> Ordena o busca por l√≠nea comercial para identificar qu√© categor√≠as tienen m√°s pedidos pendientes.</li>
                <li><strong>Detecci√≥n de Retrasos:</strong> Ordena por fecha para identificar pedidos antiguos que a√∫n no se han facturado y requieren atenci√≥n.</li>
            </ul>
        </section>

        <section id="exportacion">
            <h2><i class="bi bi-file-earmark-excel-fill"></i>Exportaci√≥n de Datos</h2>
            <p>
                El sistema permite exportar datos a formato <strong>Microsoft Excel (.xlsx)</strong> desde m√∫ltiples ubicaciones, facilitando el an√°lisis offline, reportes ejecutivos y compartir informaci√≥n con otras √°reas de la empresa.
            </p>

            <h3>Ubicaciones de Exportaci√≥n</h3>

            <h4>1. Desde el Dashboard Internacional</h4>
            <p>
                En la tabla "Total por L√≠nea Comercial" (parte central del dashboard), encontrar√°s dos botones de exportaci√≥n en la parte superior derecha:
            </p>
            <ul>
                <li><strong>Bot√≥n "Exp. Facturado" (icono Excel verde):</strong>
                    <ul>
                        <li><strong>Contenido:</strong> Descarga un detalle completo de todas las ventas que ya han sido facturadas.</li>
                        <li><strong>Alcance del filtro:</strong> Si tienes un cliente seleccionado en el filtro principal, exportar√° solo las ventas de ese cliente. Si no hay filtro, exportar√° todas las ventas de todos los clientes internacionales.</li>
                        <li><strong>Columnas incluidas:</strong> Fecha de factura, n√∫mero de factura, cliente, producto, descripci√≥n completa, cantidad, l√≠nea comercial, importe en USD, estado de factura.</li>
                        <li><strong>Uso recomendado:</strong> Reportes de ingresos confirmados, an√°lisis de ventas hist√≥ricas, auditor√≠as contables.</li>
                    </ul>
                </li>

                <li><strong>Bot√≥n "Exp. Por Facturar" (icono Excel naranja):</strong>
                    <ul>
                        <li><strong>Contenido:</strong> Descarga un detalle de todos los pedidos de venta confirmados que a√∫n no se han facturado.</li>
                        <li><strong>Alcance del filtro:</strong> Respeta el filtro de cliente activo. Si hay un cliente seleccionado, exportar√° solo sus pedidos pendientes. Si no, exportar√° todos los pendientes.</li>
                        <li><strong>Columnas incluidas:</strong> N√∫mero de pedido, cliente, producto, descripci√≥n completa, cantidad, l√≠nea comercial, total pendiente en USD, estado del pedido.</li>
                        <li><strong>Uso recomendado:</strong> Planificaci√≥n de facturaci√≥n, proyecciones de flujo de caja, seguimiento de compromisos comerciales, coordinaci√≥n con log√≠stica.</li>
                    </ul>
                </li>
            </ul>

            <h4>2. Desde la Vista de Ventas Detalladas (<code>/sales</code>)</h4>
            <ul>
                <li><strong>Bot√≥n de Exportaci√≥n:</strong> Ubicado en la parte superior de la tabla.</li>
                <li><strong>Contenido:</strong> Exporta los datos exactos que est√°n siendo visualizados en la tabla, <strong>respetando todos los filtros aplicados</strong> (fecha, cliente, b√∫squeda).</li>
                <li><strong>Ventaja:</strong> Permite crear reportes muy espec√≠ficos aplicando m√∫ltiples filtros antes de exportar. Por ejemplo: "Todas las ventas del cliente X entre enero y marzo".</li>
            </ul>

            <h4>3. Desde la Vista de Pedidos Pendientes (<code>/pending</code>)</h4>
            <ul>
                <li><strong>Bot√≥n de Exportaci√≥n:</strong> Ubicado en la parte superior de la tabla.</li>
                <li><strong>Contenido:</strong> Exporta los pedidos pendientes visibles en la tabla, <strong>respetando todos los filtros aplicados</strong>.</li>
                <li><strong>Ventaja:</strong> √ötil para generar listas de trabajo espec√≠ficas. Por ejemplo: "Pedidos del cliente Y pendientes de facturar en el mes actual".</li>
            </ul>

            <h3>Formato del Archivo Exportado</h3>
            <ul>
                <li><strong>Tipo de archivo:</strong> Excel (.xlsx), compatible con Microsoft Excel, Google Sheets, LibreOffice Calc, etc.</li>
                <li><strong>Estructura:</strong> Hoja √∫nica con los datos en formato tabular, listo para an√°lisis.</li>
                <li><strong>Encabezados:</strong> Primera fila contiene los nombres de las columnas en espa√±ol.</li>
                <li><strong>Formato de montos:</strong> Los valores num√©ricos se exportan como n√∫meros (no como texto), permitiendo realizar operaciones matem√°ticas directamente en Excel.</li>
                <li><strong>Formato de fechas:</strong> Fechas en formato est√°ndar reconocible por Excel.</li>
            </ul>

            <h3>Casos de Uso de Exportaci√≥n</h3>
            <div class="note">
                <strong><i class="bi bi-briefcase-fill"></i>Ejemplos Pr√°cticos:</strong>
                <ul style="margin-top: 10px;">
                    <li><strong>Reporte Mensual de Ventas:</strong> Desde <code>/sales</code>, aplica filtro de fechas del mes deseado y exporta. Tendr√°s un Excel con todas las ventas del mes para an√°lisis o presentaci√≥n.</li>
                    
                    <li><strong>An√°lisis de Cliente Espec√≠fico:</strong> Selecciona el cliente en el dashboard, exporta "Facturado" y "Por Facturar". Con ambos archivos puedes hacer un an√°lisis completo del cliente en Excel.</li>
                    
                    <li><strong>Planificaci√≥n de Flujo de Caja:</strong> Desde <code>/pending</code>, filtra por rango de fechas futuro y exporta. Tendr√°s una proyecci√≥n de ingresos esperados por per√≠odo.</li>
                    
                    <li><strong>Reporte por L√≠nea Comercial:</strong> Exporta datos generales y en Excel aplica filtros o tablas din√°micas para analizar por l√≠nea comercial.</li>
                    
                    <li><strong>Auditor√≠a de Productos:</strong> Exporta ventas facturadas, luego en Excel usa filtros para analizar el desempe√±o de productos espec√≠ficos.</li>
                    
                    <li><strong>Comparativa Anual:</strong> Exporta ventas del a√±o actual y del a√±o anterior (cambiando filtros de fecha), luego compara en Excel.</li>
                </ul>
            </div>

            <h3>Recomendaciones para Exportaci√≥n</h3>
            <ul>
                <li><strong>Aplica filtros antes de exportar:</strong> Es m√°s eficiente filtrar en el sistema y exportar solo lo necesario que exportar todo y filtrar en Excel.</li>
                <li><strong>Nombra los archivos apropiadamente:</strong> Cuando descargues, renombra el archivo con informaci√≥n relevante (ej: "Ventas_CLIENTE_X_Enero_2025.xlsx").</li>
                <li><strong>Combina exportaciones:</strong> Para an√°lisis completos, exporta tanto facturado como pendiente del mismo cliente y consolida en Excel.</li>
                <li><strong>Verifica los datos:</strong> Antes de exportar, revisa que los filtros aplicados sean correctos y que la tabla muestre la informaci√≥n esperada.</li>
                <li><strong>Actualizaci√≥n de datos:</strong> Los archivos exportados son "fotograf√≠as" de un momento. Si los datos en Odoo cambian, deber√°s exportar nuevamente.</li>
            </ul>

            <div class="note">
                <strong><i class="bi bi-shield-check"></i>Confidencialidad:</strong> Los archivos exportados contienen informaci√≥n comercial sensible. Aseg√∫rate de almacenarlos en ubicaciones seguras y compartirlos solo con personal autorizado. No env√≠es archivos con datos financieros por correo electr√≥nico sin protecci√≥n (usa contrase√±as o canales seguros).
            </div>
        </section>

        <section id="solucion-problemas">
            <h2><i class="bi bi-tools"></i>Soluci√≥n de Problemas y Preguntas Frecuentes</h2>
            
            <h3>Problemas Comunes</h3>
            
            <h4>1. No puedo iniciar sesi√≥n</h4>
            <ul>
                <li><strong>Verificar credenciales:</strong> Aseg√∫rate de usar el mismo usuario y contrase√±a que usas para acceder a Odoo.</li>
                <li><strong>May√∫sculas y min√∫sculas:</strong> Las contrase√±as distinguen entre may√∫sculas y min√∫sculas.</li>
                <li><strong>Espacios adicionales:</strong> Verifica que no haya espacios antes o despu√©s del usuario/contrase√±a.</li>
                <li><strong>Cuenta bloqueada:</strong> Si has intentado varias veces sin √©xito, tu cuenta de Odoo podr√≠a estar temporalmente bloqueada. Contacta al administrador del sistema.</li>
            </ul>

            <h4>2. Los datos no se actualizan o parecen desactualizados</h4>
            <ul>
                <li><strong>Recargar la p√°gina:</strong> Presiona F5 o el bot√≥n de recargar del navegador para obtener los datos m√°s recientes.</li>
                <li><strong>Borrar cach√©:</strong> Si el problema persiste, limpia la cach√© del navegador (Ctrl + Shift + Delete).</li>
                <li><strong>Conexi√≥n con Odoo:</strong> El sistema obtiene datos en tiempo real de Odoo. Si Odoo est√° lento o no responde, el dashboard tambi√©n se ver√° afectado.</li>
                <li><strong>Datos reci√©n ingresados:</strong> Si acabas de ingresar datos en Odoo, espera unos segundos y recarga el dashboard.</li>
            </ul>

            <h4>3. Las metas no aparecen o muestran valores incorrectos</h4>
            <ul>
                <li><strong>Verificar Google Sheets:</strong> Las metas se almacenan en Google Sheets. Verifica que el archivo tenga los permisos correctos.</li>
                <li><strong>A√±o seleccionado:</strong> Aseg√∫rate de estar en el a√±o correcto. Las metas son anuales y se definen por a√±o.</li>
                <li><strong>Guardar cambios:</strong> Despu√©s de modificar metas, debes hacer clic en "Guardar Metas" para que se persistan.</li>
                <li><strong>Formato de n√∫meros:</strong> Las metas deben ingresarse como n√∫meros sin s√≠mbolos (ej: 100000, no $100,000).</li>
            </ul>

            <h4>4. Los gr√°ficos no se muestran correctamente</h4>
            <ul>
                <li><strong>Navegador compatible:</strong> Usa Chrome, Firefox, Edge o Safari actualizado. Navegadores muy antiguos pueden tener problemas.</li>
                <li><strong>JavaScript habilitado:</strong> Aseg√∫rate de que JavaScript est√© habilitado en tu navegador (es necesario para los gr√°ficos).</li>
                <li><strong>Extensiones del navegador:</strong> Algunos bloqueadores de anuncios o extensiones de privacidad pueden interferir. Intenta deshabil√≠tarlos temporalmente.</li>
                <li><strong>Tama√±o de ventana:</strong> Si la ventana es muy peque√±a, algunos gr√°ficos pueden no renderizarse correctamente. Maximiza la ventana o usa zoom menor.</li>
            </ul>

            <h4>5. La exportaci√≥n a Excel falla o el archivo est√° vac√≠o</h4>
            <ul>
                <li><strong>Datos disponibles:</strong> Verifica que realmente haya datos para exportar. Si la tabla est√° vac√≠a, el Excel tambi√©n lo estar√°.</li>
                <li><strong>Permisos de descarga:</strong> Aseg√∫rate de que tu navegador permita descargas desde el sitio.</li>
                <li><strong>Bloqueo de popup:</strong> Si el archivo no se descarga, verifica que no haya un bloqueador de ventanas emergentes activo.</li>
                <li><strong>Reintentar:</strong> Si falla, recarga la p√°gina e intenta nuevamente.</li>
            </ul>

            <h3>Mejores Pr√°cticas de Uso</h3>
            
            <h4>Para An√°lisis Efectivo:</h4>
            <ul>
                <li><strong>Comienza con la vista general:</strong> Inicia sin filtros para tener una visi√≥n completa del negocio, luego profundiza en clientes espec√≠ficos.</li>
                <li><strong>Usa el an√°lisis jer√°rquico:</strong> Es una herramienta poderosa para descubrir patrones. Navega los 5 niveles para encontrar insights ocultos.</li>
                <li><strong>Monitorea los colores de sem√°foro:</strong> Los indicadores rojos requieren atenci√≥n inmediata. Prioriza la acci√≥n en clientes o l√≠neas en rojo.</li>
                <li><strong>Combina vistas:</strong> Usa el dashboard para identificar problemas, luego ve a las vistas detalladas (/sales, /pending) para investigar a fondo.</li>
                <li><strong>Exporta regularmente:</strong> Genera reportes mensuales exportando datos y archiv√°ndolos para an√°lisis hist√≥ricos futuros.</li>
            </ul>

            <h4>Para Gesti√≥n de Metas:</h4>
            <ul>
                <li><strong>Define metas realistas:</strong> Basa las metas en datos hist√≥ricos y proyecciones de crecimiento razonables.</li>
                <li><strong>Revisa trimestralmente:</strong> Aunque las metas son anuales, rev√≠salas cada trimestre para hacer ajustes si es necesario.</li>
                <li><strong>Documenta cambios:</strong> Si modificas metas, mant√©n un registro externo del motivo (cambios de mercado, nuevos contratos, etc.).</li>
                <li><strong>Comunica a los equipos:</strong> Aseg√∫rate de que los equipos comerciales conozcan sus metas y tengan acceso al dashboard para hacer seguimiento.</li>
            </ul>

            <h4>Para Optimizaci√≥n del Sistema:</h4>
            <ul>
                <li><strong>Horarios de menor carga:</strong> Para consultas muy extensas o exportaciones masivas, √∫salo en horarios de menor actividad (temprano en la ma√±ana).</li>
                <li><strong>Aplica filtros antes de exportar:</strong> Exportar datos filtrados es m√°s r√°pido y eficiente que exportar todo.</li>
                <li><strong>No dejes sesiones abiertas:</strong> Cierra sesi√≥n cuando termines, especialmente en computadoras compartidas.</li>
                <li><strong>Usa marcadores:</strong> Agrega el dashboard a tus favoritos del navegador para acceso r√°pido.</li>
            </ul>

            <h3>Glosario de T√©rminos</h3>
            <ul>
                <li><strong>Odoo:</strong> Sistema ERP (Enterprise Resource Planning) que almacena todos los datos de ventas, pedidos y clientes.</li>
                <li><strong>ERP:</strong> Sistema integrado de gesti√≥n empresarial.</li>
                <li><strong>Drill-Down:</strong> T√©cnica de an√°lisis que permite profundizar desde datos agregados hacia datos m√°s detallados.</li>
                <li><strong>KPI:</strong> Key Performance Indicator (Indicador Clave de Rendimiento). M√©trica que eval√∫a el √©xito de una actividad.</li>
                <li><strong>Bullet Chart:</strong> Tipo de gr√°fico que compara un valor actual contra un objetivo, com√∫n en dashboards ejecutivos.</li>
                <li><strong>Donut Chart:</strong> Gr√°fico de pastel con un espacio vac√≠o en el centro (forma de dona).</li>
                <li><strong>Amount Currency:</strong> Campo t√©cnico de Odoo que almacena el valor monetario de una transacci√≥n en la moneda especificada.</li>
                <li><strong>Default Code:</strong> C√≥digo √∫nico interno del producto en Odoo, tambi√©n llamado "Referencia interna".</li>
                <li><strong>XML-RPC:</strong> Protocolo de comunicaci√≥n que usa el dashboard para conectarse con Odoo.</li>
            </ul>

            <div class="note">
                <strong><i class="bi bi-question-circle-fill"></i>¬øNecesitas m√°s ayuda?</strong><br>
                Si encuentras un problema que no est√° cubierto en este manual o necesitas soporte t√©cnico adicional, contacta al administrador del sistema o al departamento de TI. Cuando reportes un problema, incluye:
                <ul style="margin-top: 10px;">
                    <li>Descripci√≥n detallada del problema</li>
                    <li>Pasos para reproducir el error</li>
                    <li>Capturas de pantalla si es posible</li>
                    <li>Navegador y sistema operativo que est√°s usando</li>
                </ul>
            </div>
        </section>

    </main>

    <script>
        // Script para resaltar la secci√≥n activa en la tabla de contenidos
        document.addEventListener('DOMContentLoaded', () => {
            const sections = document.querySelectorAll('section');
            const navLinks = document.querySelectorAll('#toc a');
            
            // Variable para rastrear la √∫ltima secci√≥n activa
            let currentActiveSection = null;

            const observer = new IntersectionObserver(entries => {
                // Ordenar entries por intersectionRatio descendente para obtener la m√°s visible
                const sortedEntries = entries
                    .filter(entry => entry.isIntersecting)
                    .sort((a, b) => b.intersectionRatio - a.intersectionRatio);
                
                // Solo procesar si hay al menos una secci√≥n visible
                if (sortedEntries.length > 0) {
                    const mostVisibleEntry = sortedEntries[0];
                    
                    // Solo actualizar si cambi√≥ la secci√≥n activa
                    if (currentActiveSection !== mostVisibleEntry.target.id) {
                        currentActiveSection = mostVisibleEntry.target.id;
                        
                        // Remover clase active de todos los links
                        navLinks.forEach(link => link.classList.remove('active'));
                        
                        // Agregar clase active solo al link correspondiente
                        navLinks.forEach(link => {
                            if (link.getAttribute('href').substring(1) === currentActiveSection) {
                                link.classList.add('active');
                            }
                        });
                    }
                }
            }, { 
                threshold: [0, 0.25, 0.5, 0.75, 1],
                rootMargin: '-100px 0px -66% 0px'
            });

            sections.forEach(section => {
                observer.observe(section);
            });

            // Tambi√©n manejar clicks en los links del men√∫
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    const targetId = link.getAttribute('href').substring(1);
                    currentActiveSection = targetId;
                    
                    // Actualizar inmediatamente la clase active
                    navLinks.forEach(l => l.classList.remove('active'));
                    link.classList.add('active');
                });
            });
        });
    </script>

</body>
</html>